# BorshchevY_platform
BorshchevY Platform repository

*Самовосстановление компонентов controlplane
Манифесты компонентов [controlplane] хранятся в директории [/etc/kubernetes/manifests] на мастер нодах и служба [kublet] постоянно проверяет их работоспособность. В случае проблем (в нашем случае, мы удалили все поды контролплейна) - [kubelet] стартует компоненты контролплейна из соответствующих манифестов этой директории.
[CoreDNS] работает как обычный деплоймент, за которым следит компонент контролплейна [controller-manager] и в случае, 
если мы удаляем поды деплоймента [core-dns], то [replicaset-controller] восстанавливает поды в соответствии с манифестом деплоймента [core-dns] 

*Создание образа веб-приложения и запуск его в [k8s]
Создан [Dockerfile] с вебсервером [nginx] который отвечает на 8000 порту и стартует от пользователя [app] c UID 1001.
Образ был собран командой [docker build -t nginx-k8s-intro .], далее перетегирован командой [docker tag nginx-k8s-intro borshchevyn/nginx-k8s-intro:1.0.0] и залит на репозиторий [dockerhub]. Далее, был создан манифест, который запускает [pod] в котором стартует контейнер с образом borshchevyn/nginx-k8s-intro:1.0.0. Далее, в [pod] добавлен [init container], подгружающий новую страницу в наше  веб-приложение.

*Исправление проблемы запуска сервиса [frontend]
Сервис ожидает переменных окружения, которые отсутсвтуют в сгенерированном манифесте.
Добавление переменных окружения в спецификацию контейнера пода решает проблему запуска сервиса [frontend]